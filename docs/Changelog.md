# 更新日志

## 更新 22.03.23

打卡上线快一个月，总算又更新了。这段时间大家十分喜爱凯尔希，也有对凯尔希的建议，十分感谢大家。

功能上，新出了以下内容：  
 - 签到运势  
 - bot功能开关管理  
 - bot退群功能  
 - 加好友与加群审批  

代码上，凯尔希终于终于换上了saya来管理模组，模块化太香了！！群友们想了很多怪点子，我时间不充裕，只能一点一点来啦。

以及，学习了非实例化的python类用法，受益匪浅，import进来一些全局变量，修改还能保存，真的很舒服。

## 更新 22.02.27

更新了签到功能。指令是`#签到`或者`#打卡`。

货币系统与信赖系统还没做……签到绘图的bug挺多的，还需慢慢修改。

使用时依然要先运行一下`Signin.py`建立数据库。

使用原始方案为[sign in image generator](https://github.com/Redlnn/signin-image-generator)，魔改了一下。感谢大佬。

也简单优化了一些代码逻辑。

管理员控制的接口要提上日程了，唉。

## 更新 22.02.23

首先，更新了框架！！

现在bot使用的是Graia-Ariadne框架，真的很舒服！推荐

优化了一些逻辑、代码结构等等……调整了部分文字小细节。

更新了星际争霸的突变查询功能，更新了四人牌桌车队组建功能。

2022年2月22日星期二，本二次元的小努力总算没有白费。



## 更新  22.02.13

试图为凯尔希加一个文档页面~

## 更新 22.01.17

发生了不可逆事故，腾讯开始对bot进行风控，服务器运行卡顿，mcl更换消息码……一系列事情之下，可能需要更换凯尔希的框架咯。

因此，先把最近的更新放上来……咸鱼氦核还是更新了不少东西的！

> 更新记录 21.12.18  
> 优化bot文件目录  
> |---MessageProcessor # 消息标准化处理中心  
> |---bot2       # bot主体启动文件  
> |---AuthSet      # 权限系统  
> |---story_xu     # 核心函数  
> |---readme      # 项目介绍-帮助  
> |---database:  
> |---|---Kal-tsit.db    # 数据库  
> |---|---beijing.pkl    # 地图文件  
> |---|---temp.png     # 缓存图片   
> |---|---stopRepeat.jpg  # 打断复读使用的图片  
> |---|---adventureMap.pkl # 生成的地下城地图  
> |---function：  
> |---|---prts         # prts功能  
> |---|---ForcastForTricks   # 天气预报功能  
> |---|---DarkTemple      # 消息处理器-功能核心组件  
> |---|---squads_init      # 初始化干员  
> |---|---praise        # 夸夸   
> |---|---CardSearch      # ygo查卡功能  
> |---|---couplet        # 对对子，出对！  
> |---|---operator_rollbox_bot # 自限作业抽取  
> |---|---adventure       # 肉鸽迷宫  
> |---|---stopRepeat      # 打断复读  

打眼一看文件目录，是不是发现比上一版多了好多功能？那么为什么半天没有更新呢……因为懒，哈哈。还有一些功能没有单独放一个文件，譬如凯尔希的办公桌（漂流瓶），以及每个bot都少不了的抽瑟图功能之类……

首先还是老样子，几个带图片的功能用不成：地图、打断复读、抽se图（这也是本次更新的缘由……）

个人比较满意的是地下城（adventure.py）和复读打断功能！太喜欢了以至于经常自己刷五句话哈哈哈。

database里会保存每个群的聊天记录（复读超过五句只会保存一句），同时还解包了YGO的app，把卡面数据丢进去了（写好之后就没更新过……已经落后版本了哈哈）。

对对子功能也很好玩，喜欢谜语的大家一定要试试。模型是跑了四天的lstm……但是依然谜语（

其他的功能没什么好介绍的了。这次腾讯出手，真是难受了。不知道凯尔希能不能挺住。群里有大佬推荐更换框架，有时间就试试吧……优先级在todolist上不是很靠前，大概是看透了凯尔希被很多人只当做抽图工具这一事实【捂脸






## 更新 21.09.06

#### 1.优化bot文件目录

> |---MessageProcessor # 消息标准化处理中心  
> |---bot2             # bot主体启动文件  
> |---AuthSet          # 权限系统  
> |---story_xu         # 核心函数  
> |---readme           # 代码介绍  
> |---database:   
> |---|---Kal-tsit.db  # 数据库  
> |---|---beijing.pkl  # 地图文件  
> |---|---temp.png     # 缓存  
> |---function：  
> |---|---prts                 # prts功能  
> |---|---ForcastForTricks     # 天气预报功能  
> |---|---DarkTemple           # 消息处理器  
> |---|---squads_init          # 初始化干员  
> |---|---operator_rollbox_bot # 群作业系统  

### 2.添加/修改了功能

- 权限系统  
- 天气/地图查询  
- jieba分词器  
- prts查询爬虫  

**21.09.06 by KOneLane**